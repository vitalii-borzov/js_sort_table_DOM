{"version":3,"sources":["scripts/main.js"],"names":["isValid","editingArea","body","document","querySelector","thead","tbody","rows","nameLength","minAge","maxAge","timeoutOfMessage","compareIndex","isCorrect","sortTableAsc","index","columnName","dscSorting","normalizeNumber","string","slice","split","join","sort","first","second","a","children","innerHTML","b","localeCompare","reverse","append","addEventListener","eventClick","th","target","closest","cellIndex","innerText","tr","forEach","row","removeAttribute","classList","add","addEmployee","createElement","validation","data","get","trim","length","test","pushNotification","posTop","posRight","title","description","type","message","messageTitle","messageDescription","style","top","right","setAttribute","setTimeout","remove","editStart","td","elem","cellOffice","className","focus","onblur","office","selectedIndex","value","onkeydown","enter","key","cellInput","e","validate","editEnd","changeIsCorrect","cell","isOk","firstChild","submitEvent","employeeInfo","FormData","salaryToNormalize","normalizedSalary","salary","preventDefault","newRow","insertRow","insertCell","push","reset","doubleClick","input","parentElement"],"mappings":"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","file":"main.100020de.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\n// all needed variables\n\nconst body = document.querySelector('body');\nconst thead = document.querySelector('thead');\nconst tbody = document.querySelector('tbody');\nconst rows = [...tbody.rows];\nconst nameLength = 4;\nconst minAge = 18;\nconst maxAge = 90;\nconst timeoutOfMessage = 3000;\nlet compareIndex = -1;\nlet isValid;\nlet editingArea;\nlet isCorrect = true;\n\n// table sorting\n\nthead.addEventListener('click', eventClick => {\n  const th = eventClick.target.closest('th');\n  const index = th.cellIndex;\n\n  sortTableAsc(index, th.innerText, compareIndex === index);\n\n  compareIndex = (compareIndex === index) ? -1 : index;\n});\n\nfunction sortTableAsc(index, columnName, dscSorting) {\n  rows.sort((first, second) => {\n    const a = first.children[index].innerHTML;\n    const b = second.children[index].innerHTML;\n\n    switch (columnName) {\n      case 'Name':\n      case 'Position':\n      case 'Office':\n        return a.localeCompare(b);\n\n      case 'Age':\n        return a - b;\n\n      case 'Salary':\n        return normalizeNumber(a) - normalizeNumber(b);\n    }\n  });\n\n  if (dscSorting) {\n    rows.reverse();\n  }\n\n  tbody.append(...rows);\n\n  function normalizeNumber(string) {\n    return +string.slice(1).split(',').join('');\n  }\n}\n\n// show active row\n\ntbody.addEventListener('click', eventClick => {\n  const tr = eventClick.target.closest('tr');\n\n  rows.forEach(row => {\n    row.removeAttribute('class');\n  });\n\n  tr.classList.add('active');\n});\n\n// create form and validate data\n\nconst addEmployee = document.createElement('form');\n\naddEmployee.classList.add('new-employee-form');\n\naddEmployee.innerHTML = `\n  <label> Name:\n    <input type=\"text\" name = \"name\" data-qa=\"name\" required>\n  </label>\n  <label> Position:\n    <input type=\"text\" name = \"position\" data-qa=\"position\">\n  </label>\n  <label> Office:\n    <select name = \"office\" data-qa=\"office\" required>\n      <option value=\"\" selected disabled>Choose office</option>\n      <option value=\"Tokyo\">Tokyo</option>\n      <option value=\"Singapore\">Singapore</option>\n      <option value=\"London\">London</option>\n      <option value=\"New York\">New York</option>\n      <option value=\"Edinburgh\">Edinburgh</option>\n      <option value=\"San Francisco\">San Francisco</option>\n    </select>\n  </label>\n  <label> Age:\n    <input type=\"number\" name = \"age\" data-qa=\"age\" required>\n  </label>\n  <label> Salary:\n    <input type=\"number\" name = \"salary\" data-qa=\"salary\" required>\n  </label>\n  <button type=\"submit\">Save to table</button>\n`;\n\nbody.append(addEmployee);\n\nfunction validation(data) {\n  if (data.get('name').trim().length < nameLength\n    || /\\d/.test(data.get('name'))) {\n    pushNotification(\n      580,\n      10,\n      'Enter a correct name!',\n      'Name must contain at least 4 letters and not include numbers',\n      'error'\n    );\n\n    isValid = false;\n  } else if (data.get('age') < minAge\n  || data.get('age') > maxAge) {\n    pushNotification(\n      580,\n      10,\n      'Enter a correct age!',\n      'Your age must be from 18 to 90 years',\n      'error'\n    );\n\n    isValid = false;\n  } else if (data.get('position').trim().length < nameLength\n    || /\\d/.test(data.get('position'))) {\n    pushNotification(\n      580,\n      10,\n      'Enter a position!',\n      'You should enter a correct position',\n      'error'\n    );\n\n    isValid = false;\n  } else if (data.get('salary') <= 0) {\n    pushNotification(\n      580,\n      10,\n      'Enter a correct salary!',\n      'Salary must be more than 0',\n      'error'\n    );\n\n    isValid = false;\n  } else {\n    isValid = true;\n  }\n};\n\naddEmployee.addEventListener('submit', submitEvent => {\n  const employeeInfo = new FormData(addEmployee);\n  const salaryToNormalize = employeeInfo.get('salary');\n  let normalizedSalary = salaryToNormalize;\n\n  if (salaryToNormalize.length > 3) {\n    normalizedSalary\n    = salaryToNormalize.slice(0, -3)\n    + ','\n    + salaryToNormalize.slice(-3, salaryToNormalize.length);\n  }\n\n  const salary = `$${normalizedSalary}`;\n\n  submitEvent.preventDefault();\n  validation(employeeInfo);\n\n  if (!isValid) {\n    return;\n  }\n\n  const newRow = tbody.insertRow();\n\n  newRow.insertCell(0).innerText = employeeInfo.get('name');\n  newRow.insertCell(1).innerText = employeeInfo.get('position');\n  newRow.insertCell(2).innerText = employeeInfo.get('office');\n  newRow.insertCell(3).innerText = employeeInfo.get('age');\n  newRow.insertCell(4).innerText = salary;\n\n  rows.push(newRow);\n\n  addEmployee.reset();\n\n  pushNotification(\n    460,\n    10,\n    'Validation success!',\n    'Congrats! New employee is successfully added into the table',\n    'success');\n});\n\nfunction pushNotification(posTop, posRight, title, description, type) {\n  const message = document.createElement('div');\n  const messageTitle = document.createElement('h2');\n  const messageDescription = document.createElement('p');\n\n  message.style.top = `${posTop}px`;\n  message.style.right = `${posRight}px`;\n\n  messageTitle.innerText = title;\n  messageDescription.innerText = description;\n\n  message.classList.add('notification', type);\n  message.setAttribute('data-qa', 'notification');\n  messageTitle.classList.add('title');\n\n  message.append(messageTitle, messageDescription);\n  document.body.append(message);\n\n  setTimeout(() => {\n    message.remove();\n  }, timeoutOfMessage);\n};\n\n// change, validate and save data in cell-input\n\ntbody.addEventListener('dblclick', doubleClick => {\n  const target = doubleClick.target.closest('td');\n  const input = document.querySelector('.cell-input');\n\n  if (input) {\n    pushNotification(\n      700,\n      10,\n      'Unfinished changes',\n      'You cannot change another cell until this one is not finished',\n      'error'\n    );\n\n    return editStart(input.parentElement);\n  }\n\n  if (!target) {\n    return;\n  }\n\n  editStart(target);\n});\n\nfunction editStart(td) {\n  editingArea = {\n    elem: td,\n    data: td.innerHTML,\n  };\n\n  if (td.cellIndex === 2) {\n    const cellOffice = document.createElement('select');\n\n    cellOffice.className = 'cell-input';\n\n    cellOffice.innerHTML = `\n      <option value=\"Choose office\" selected disabled>Choose office</option>\n      <option value=\"Tokyo\">Tokyo</option>\n      <option value=\"Singapore\">Singapore</option>\n      <option value=\"London\">London</option>\n      <option value=\"New York\">New York</option>\n      <option value=\"Edinburgh\">Edinburgh</option>\n      <option value=\"San Francisco\">San Francisco</option>\n    `;\n\n    td.innerHTML = '';\n    td.append(cellOffice);\n    cellOffice.focus();\n\n    cellOffice.onblur = () => {\n      const office = cellOffice.selectedIndex;\n\n      td.innerHTML = cellOffice[office].value;\n\n      if (cellOffice.selectedIndex === 0) {\n        td.innerHTML = editingArea.data;\n      }\n\n      pushNotification(\n        460,\n        10,\n        'Changed successfully!',\n        'Congrats! The office was successfully changed.',\n        'success');\n    };\n\n    cellOffice.onkeydown = (enter) => {\n      if (enter.key === 'Enter') {\n        cellOffice.onblur();\n      }\n    };\n  } else {\n    const cellInput = document.createElement('input');\n\n    cellInput.className = 'cell-input';\n    cellInput.innerHTML = td.innerHTML;\n    td.innerHTML = '';\n    td.append(cellInput);\n    cellInput.focus();\n\n    switch (td.cellIndex) {\n      case 0:\n      case 1:\n        cellInput.setAttribute('type', 'text');\n        break;\n\n      case 3:\n      case 4:\n        cellInput.setAttribute('type', 'number');\n        break;\n    }\n\n    cellInput.onblur = (e) => {\n      validate(td.cellIndex, cellInput);\n      editEnd(editingArea.elem, isCorrect);\n      changeIsCorrect();\n    };\n\n    cellInput.onkeydown = (enter) => {\n      if (enter.key === 'Enter') {\n        cellInput.onblur();\n      }\n    };\n  }\n};\n\nfunction validate(index, cell) {\n  switch (index) {\n    case 0:\n    case 1:\n      if (/\\d/.test(cell.value)\n        || cell.value.trim().length < nameLength) {\n        isCorrect = false;\n\n        pushNotification(\n          580,\n          10,\n          'Enter a correct data!',\n          'This field must contain at least 4 letters and not include numbers.',\n          'error');\n      }\n\n      break;\n\n    case 3:\n      if (cell.value < 18\n        || cell.value > 90) {\n        if (cell.value === '') {\n          isCorrect = false;\n\n          return;\n        }\n\n        isCorrect = false;\n\n        pushNotification(\n          580,\n          10,\n          'Enter a correct age!',\n          'The age must be 18+ and less than 90.',\n          'error');\n      }\n\n      break;\n\n    case 4:\n      if (+cell.value <= 0) {\n        if (cell.value === '') {\n          isCorrect = false;\n\n          return;\n        }\n\n        isCorrect = false;\n\n        pushNotification(\n          580,\n          10,\n          'Enter a correct salary!',\n          'The salary must be more than 0.',\n          'error');\n      }\n\n      break;\n  }\n}\n\nfunction editEnd(td, isOk) {\n  if (isOk) {\n    switch (td.cellIndex) {\n      case 4:\n        td.innerHTML = `${(+td.value)}`;\n\n        pushNotification(\n          460,\n          10,\n          'Changed successfully!',\n          'Congrats! The salary was successfully changed.',\n          'success');\n        break;\n\n      case 0:\n      case 1:\n      case 3:\n        td.innerHTML = td.firstChild.value;\n\n        pushNotification(\n          460,\n          10,\n          'Changed successfully!',\n          'Congrats! The employee data was successfully changed.',\n          'success');\n        break;\n    }\n  } else {\n    if (td.firstChild.value === '') {\n      td.innerHTML = editingArea.data;\n\n      return;\n    }\n\n    return editStart(td);\n  }\n\n  editingArea = null;\n};\n\nfunction changeIsCorrect() {\n  isCorrect = true;\n}\n"]}